{
  "comments": [
    {
      "key": {
        "uuid": "a7c23755_a1a160aa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 5
      },
      "writtenOn": "2017-02-10T07:51:36Z",
      "side": 1,
      "message": "Don\u0027t we have a different problem here? If we are in a situation where every fetch leads to autogc then we should fix this. To decide whether to do an autogc we could count only those loose objects which not also persisted in a pack file. Then the first fetch would pack the loose objects inside a pack but also keeps the objects as loose objects because they are too young. The next fetch triggering an autogc would not count objetcs which are loose and inside packs and therefore not triggering a new gc. Sounds good? Then I would propse a change.",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_72cb94c8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 93425
      },
      "writtenOn": "2017-02-10T20:07:01Z",
      "side": 1,
      "message": "We never pack unreferenced loose objects, because they might be garbage (maybe they end up in a pack anyway, because at the time the pack was referenced, they were referenced, or because we received them in a fetch).  Having the same objects both packed and loose is a waste of space -- especially if we\u0027re just doing this for bookkeeping purposes.  We do eventually want to delete these objects (after two weeks: see https://git.eclipse.org/r/#/c/89455 ), so they have to remain loose so that we can use the filesystem for the two-week timer.    \n\nIn regular git, the gc.log file \"fixes\" the repeated-gc problem by sending the \"too many loose objects\" message into gc.log, which blocks gc (for a day, once my patch is merged).  Here, we don\u0027t yet write that message to gc.log, but we could do so if we wanted to.  Do you think I should add a patch to do that?",
      "parentUuid": "a7c23755_a1a160aa",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_ed92695c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 15,
      "author": {
        "id": 4
      },
      "writtenOn": "2017-02-10T21:27:26Z",
      "side": 1,
      "message": "yes, please add another patch for that",
      "parentUuid": "a7c23755_72cb94c8",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_9eb761bb",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 5082
      },
      "writtenOn": "2017-02-09T21:38:53Z",
      "side": 1,
      "message": "syle: no wildcards in imports?",
      "range": {
        "startLine": 94,
        "startChar": 28,
        "endLine": 94,
        "endChar": 31
      },
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_817b8498",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 127,
      "author": {
        "id": 4
      },
      "writtenOn": "2017-02-10T21:27:26Z",
      "side": 1,
      "message": "append //$NON-NLS-1$ to suppress non-externalized String warning",
      "range": {
        "startLine": 127,
        "startChar": 50,
        "endLine": 127,
        "endChar": 57
      },
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_3e49ed38",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 633,
      "author": {
        "id": 4
      },
      "writtenOn": "2017-02-10T21:27:26Z",
      "side": 1,
      "message": "style nit: missing braces, see https://wiki.eclipse.org/EGit/Contributor_Guide#Braces_for_one-line_statements",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_5ed149c3",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 641,
      "author": {
        "id": 4
      },
      "writtenOn": "2017-02-10T21:27:26Z",
      "side": 1,
      "message": "shouldn\u0027t this be private ?",
      "range": {
        "startLine": 641,
        "startChar": 1,
        "endLine": 641,
        "endChar": 7
      },
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_5e94e914",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 652,
      "author": {
        "id": 5082
      },
      "writtenOn": "2017-02-09T21:38:53Z",
      "side": 1,
      "message": "It would probably be nice to encapsulate anything to do with this log file into a class, GcLog?",
      "range": {
        "startLine": 652,
        "startChar": 39,
        "endLine": 652,
        "endChar": 40
      },
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_bee7bda3",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 652,
      "author": {
        "id": 4
      },
      "writtenOn": "2017-02-10T21:27:26Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "a7c23755_5e94e914",
      "range": {
        "startLine": 652,
        "startChar": 39,
        "endLine": 652,
        "endChar": 40
      },
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_9e40410a",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 670,
      "author": {
        "id": 4
      },
      "writtenOn": "2017-02-10T21:27:26Z",
      "side": 1,
      "message": "externalise error message",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_2d08e134",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 670,
      "author": {
        "id": 93425
      },
      "writtenOn": "2017-02-10T21:43:07Z",
      "side": 1,
      "message": "Do you mean \"MessageFormat.format\"?  I\u0027m not familiar with the term \"externalize\".",
      "parentUuid": "a7c23755_9e40410a",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_41816c06",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 672,
      "author": {
        "id": 5
      },
      "writtenOn": "2017-02-10T07:51:36Z",
      "side": 1,
      "message": "shouldn\u0027t we limit the amount of bytes we are reporting here? Otherwise one could crash our server by putting a huge gc.log file.",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_12b7c041",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 672,
      "author": {
        "id": 93425
      },
      "writtenOn": "2017-02-10T20:07:01Z",
      "side": 1,
      "message": "But you control who writes to gc.log.  I guess we might as well limit it, even though that\u0027s kind of a hassle.",
      "parentUuid": "a7c23755_41816c06",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_0103f41a",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 678,
      "author": {
        "id": 5
      },
      "writtenOn": "2017-02-10T07:51:36Z",
      "side": 1,
      "message": "we are potentially not unlocking lck anymore if we have reached this line. Shouldn\u0027t there be a lck.unlock() in the finally of the try block which starts at line 663 ?",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_f29884cf",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 678,
      "author": {
        "id": 93425
      },
      "writtenOn": "2017-02-10T20:07:01Z",
      "side": 1,
      "message": "No.  We only want to unlock it once the gc completes.  There are, I think, two cases I missed; one you mentioned below, and the other is line 682.",
      "parentUuid": "a7c23755_0103f41a",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_2108f034",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 692,
      "author": {
        "id": 5
      },
      "writtenOn": "2017-02-10T07:51:36Z",
      "side": 1,
      "message": "imagine background\u003d\u003dfalse and we don\u0027t reach this line because of exceptions between 687 and 691. We would not unlock the file.",
      "range": {
        "startLine": 692,
        "startChar": 5,
        "endLine": 692,
        "endChar": 18
      },
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a7c23755_a178809c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 4
      },
      "lineNbr": 699,
      "author": {
        "id": 4
      },
      "writtenOn": "2017-02-10T21:27:26Z",
      "side": 1,
      "message": "maybe we should also save the stacktrace of e",
      "revId": "f725b6c09430a281ce34b890b8289e1bd08c8abd",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}