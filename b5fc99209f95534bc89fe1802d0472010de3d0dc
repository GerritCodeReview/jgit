{
  "comments": [
    {
      "key": {
        "uuid": "d245c886_5c94c6fd",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/diff/SimilarityIndex.java",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 98905
      },
      "writtenOn": "2021-05-18T10:32:35Z",
      "side": 1,
      "message": "aside: there is a possible optimization here; we read the entire thing twice: once to find the \u0027\\0\u0027, once to do the hashing. We could get roughly the same behavior at reduced CPU consumption by finding the \u0027\\0\u0027 while we\u0027re doing the hashing.",
      "revId": "b5fc99209f95534bc89fe1802d0472010de3d0dc",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "809e2473_94baab8e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/diff/SimilarityIndex.java",
        "patchSetId": 3
      },
      "lineNbr": 131,
      "author": {
        "id": 301491
      },
      "writtenOn": "2021-05-26T12:06:07Z",
      "side": 1,
      "message": "Thanks for suggesting. I had a look at the hash() implementation and found that the hashing algorithm depends on the outcome of binary/text: we ignore CR in CRLF if text. So we need to detect binary files first.\n\nI also looked at the implementation of RawText.isBinary() and it runs in constant time: only looks at the first 8000 bytes of the input, so the computation is not expensive.",
      "parentUuid": "d245c886_5c94c6fd",
      "revId": "b5fc99209f95534bc89fe1802d0472010de3d0dc",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee527427_2abe2a55",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/diff/SimilarityIndex.java",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 98905
      },
      "writtenOn": "2021-05-18T10:32:35Z",
      "side": 1,
      "message": "see here: this is meant to work for binary files, so I\u0027m not sure we can shortcut this in the caller.",
      "range": {
        "startLine": 211,
        "startChar": 4,
        "endLine": 211,
        "endChar": 26
      },
      "revId": "b5fc99209f95534bc89fe1802d0472010de3d0dc",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5d03e6f_790ec221",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/diff/SimilarityIndex.java",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 301491
      },
      "writtenOn": "2021-05-26T12:06:07Z",
      "side": 1,
      "message": "Ah, I see. Thanks for pointing this out.\n\nI made the skipping optional as per your other comment.",
      "parentUuid": "ee527427_2abe2a55",
      "range": {
        "startLine": 211,
        "startChar": 4,
        "endLine": 211,
        "endChar": 26
      },
      "revId": "b5fc99209f95534bc89fe1802d0472010de3d0dc",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "52280958_ac7d523b",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/diff/SimilarityRenameDetector.java",
        "patchSetId": 3
      },
      "lineNbr": 277,
      "author": {
        "id": 98905
      },
      "writtenOn": "2021-05-18T10:32:35Z",
      "side": 1,
      "message": "can you make this optional? We don\u0027t want this for Gerrit, but the existing code is clearly supporting binary files.",
      "range": {
        "startLine": 277,
        "startChar": 6,
        "endLine": 277,
        "endChar": 45
      },
      "revId": "b5fc99209f95534bc89fe1802d0472010de3d0dc",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc9853a5_7ba3374e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/diff/SimilarityRenameDetector.java",
        "patchSetId": 3
      },
      "lineNbr": 277,
      "author": {
        "id": 301491
      },
      "writtenOn": "2021-05-26T12:06:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "52280958_ac7d523b",
      "range": {
        "startLine": 277,
        "startChar": 6,
        "endLine": 277,
        "endChar": 45
      },
      "revId": "b5fc99209f95534bc89fe1802d0472010de3d0dc",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}