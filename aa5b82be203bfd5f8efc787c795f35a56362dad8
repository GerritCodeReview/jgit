{
  "comments": [
    {
      "key": {
        "uuid": "7fd989b6_44e2601a",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 300454
      },
      "writtenOn": "2020-08-25T15:57:18Z",
      "side": 1,
      "message": "Why do you need this? Shouldn\u0027t you be just updating `statistics.reachabilityCheckDuration`?",
      "range": {
        "startLine": 323,
        "startChar": 1,
        "endLine": 323,
        "endChar": 87
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1cc3be31_253d1242",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 300349
      },
      "writtenOn": "2020-08-26T07:48:01Z",
      "side": 1,
      "message": "No, PackStatistics is immutable, so I have to create the accumulator with the metrics first and then pass it to the statistics.",
      "parentUuid": "7fd989b6_44e2601a",
      "range": {
        "startLine": 323,
        "startChar": 1,
        "endLine": 323,
        "endChar": 87
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91c144b8_6b2b2150",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 300454
      },
      "writtenOn": "2020-08-26T07:51:44Z",
      "side": 1,
      "message": "Sure, in any case, when `statistics` is created, its `reachabilityCheckDuration` should contain the value of the new metric.",
      "parentUuid": "1cc3be31_253d1242",
      "range": {
        "startLine": 323,
        "startChar": 1,
        "endLine": 323,
        "endChar": 87
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a8a8add_81b631c6",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 300349
      },
      "writtenOn": "2020-08-26T07:59:30Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "91c144b8_6b2b2150",
      "range": {
        "startLine": 323,
        "startChar": 1,
        "endLine": 323,
        "endChar": 87
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0aa290ef_d7113db3",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 300454
      },
      "writtenOn": "2020-08-26T08:17:37Z",
      "side": 1,
      "message": "See my other comment. You don\u0027t need this variable if you reuse the accumulator coming from https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1002.",
      "parentUuid": "8a8a8add_81b631c6",
      "range": {
        "startLine": 323,
        "startChar": 1,
        "endLine": 323,
        "endChar": 87
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44387845_ff865a4c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 323,
      "author": {
        "id": 1628
      },
      "writtenOn": "2020-09-24T15:17:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0aa290ef_d7113db3",
      "range": {
        "startLine": 323,
        "startChar": 1,
        "endLine": 323,
        "endChar": 87
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "db72dd2e_14dc1440",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1850,
      "author": {
        "id": 300454
      },
      "writtenOn": "2020-08-25T15:57:18Z",
      "side": 1,
      "message": "Why not updating the accumulator here instead? https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1788",
      "range": {
        "startLine": 1850,
        "startChar": 6,
        "endLine": 1850,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9af12805_a9f8faa8",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1850,
      "author": {
        "id": 300349
      },
      "writtenOn": "2020-08-26T07:51:46Z",
      "side": 1,
      "message": "checkWants is a static method and cannot directly access a non-static object (statAccumulator)",
      "parentUuid": "db72dd2e_14dc1440",
      "range": {
        "startLine": 1850,
        "startChar": 6,
        "endLine": 1850,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bb5fea37_8880def0",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1850,
      "author": {
        "id": 300349
      },
      "writtenOn": "2020-08-26T07:55:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9af12805_a9f8faa8",
      "range": {
        "startLine": 1850,
        "startChar": 6,
        "endLine": 1850,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aca5d6ea_8b656268",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1850,
      "author": {
        "id": 300454
      },
      "writtenOn": "2020-08-26T08:17:37Z",
      "side": 1,
      "message": "Indeed, you shouldn\u0027t update the accumulator from this function, but from the caller (which is not static): https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1788\n\nYou can pass the accumulator down from https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#998 all the way down to where you need it:\n- `negotiate` already has it (https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1622)\n- you can add it to `processHaveLines` (https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1677)\n- add it to `parseWants` (https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1778)\n- and measure the time before and after this line: https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1788.\n\nI\u0027m not sure about the best place to measure reachability within that chain of calls, but you should keep it to the callers of this function.\n\nNote that similar approaches have been taken for other fields of `statistics` (example https://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1055).",
      "parentUuid": "bb5fea37_8880def0",
      "range": {
        "startLine": 1850,
        "startChar": 6,
        "endLine": 1850,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8239d0e_b3461717",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1850,
      "author": {
        "id": 300349
      },
      "writtenOn": "2020-08-26T10:00:21Z",
      "side": 1,
      "message": "This is a very good idea, but \u0027processHaveLines\u0027 is also called by \u0027fetchV2\u0027:\nhttps://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1199\n\nand \u0027fetchV2 \u0027 is also called by \u0027serveOneCommandV2\u0027:\nhttps://git.eclipse.org/r/plugins/gitiles/jgit/jgit/+/refs/changes/79/168079/1/org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java#1280\n\nand so on. It would be better to measure reachability check inside \u0027parseWants\u0027 as you pointed out, but to call the global accumulator instead. Will change this.",
      "parentUuid": "aca5d6ea_8b656268",
      "range": {
        "startLine": 1850,
        "startChar": 6,
        "endLine": 1850,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02221c14_df7d70f2",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1850,
      "author": {
        "id": 1628
      },
      "writtenOn": "2020-09-24T15:17:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a8239d0e_b3461717",
      "range": {
        "startLine": 1850,
        "startChar": 6,
        "endLine": 1850,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bcdde6fb_a9eb3636",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1891,
      "author": {
        "id": 300454
      },
      "writtenOn": "2020-08-25T15:57:18Z",
      "side": 1,
      "message": "Same thing here.",
      "range": {
        "startLine": 1891,
        "startChar": 6,
        "endLine": 1891,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e56114f0_b0caa2ed",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1891,
      "author": {
        "id": 300349
      },
      "writtenOn": "2020-08-26T07:51:46Z",
      "side": 1,
      "message": "checkWants is a static method and cannot directly access a non-static object (statAccumulator)",
      "parentUuid": "bcdde6fb_a9eb3636",
      "range": {
        "startLine": 1891,
        "startChar": 6,
        "endLine": 1891,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8238bfd9_4bc62380",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/UploadPack.java",
        "patchSetId": 1
      },
      "lineNbr": 1891,
      "author": {
        "id": 300349
      },
      "writtenOn": "2020-08-26T07:55:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bcdde6fb_a9eb3636",
      "range": {
        "startLine": 1891,
        "startChar": 6,
        "endLine": 1891,
        "endChar": 47
      },
      "revId": "aa5b82be203bfd5f8efc787c795f35a56362dad8",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}