{
  "comments": [
    {
      "key": {
        "uuid": "563d0560_f85bbd93",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileReftableDatabase.java",
        "patchSetId": 18
      },
      "lineNbr": 70,
      "author": {
        "id": 51
      },
      "writtenOn": "2020-10-28T13:42:26Z",
      "side": 1,
      "message": "We could extract createRefTableDir(repo) in a separate commit before. See my \"Refactor FileReftableDatabase: extract createRefTableDir\" patch.",
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20f904c4_880803b5",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileReftableDatabase.java",
        "patchSetId": 18
      },
      "lineNbr": 78,
      "author": {
        "id": 98905
      },
      "writtenOn": "2020-12-14T18:59:27Z",
      "side": 1,
      "message": "maybe this is intentional, but I implemented worktree support in upstream, and it was much more involved than this. See\n\nhttps://github.com/git/git/pull/847/commits/d57023d9f13d178dc95d7a74751923b80d1a5939\n\nrefs/reftable-backend.c (this is still pending, but passes a significant number of tests for the worktree feature).\n\nbasically, you have to create two FileReftableStacks (one for the .git/ main ref store, and one for the worktree refstore), and do a merge on the two merged tables.",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 78,
        "endChar": 26
      },
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b22334a_748f587b",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileReftableDatabase.java",
        "patchSetId": 18
      },
      "lineNbr": 78,
      "author": {
        "id": 51
      },
      "writtenOn": "2020-12-15T08:41:47Z",
      "side": 1,
      "message": "Thanks for this pointer. What\u0027s the ETA for reftables to actually occur on the client side, in your opinion? I\u0027m asking because if this really turns out to be another major change to this patch series, in a first step we could simply declare worktree support incompatible with reftables and throw some IOException when encountering this combination.",
      "parentUuid": "20f904c4_880803b5",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 78,
        "endChar": 26
      },
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "701dc003_9c7be9e7",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileReftableDatabase.java",
        "patchSetId": 18
      },
      "lineNbr": 78,
      "author": {
        "id": 98905
      },
      "writtenOn": "2020-12-15T14:22:10Z",
      "side": 1,
      "message": "I think 3-6 months is a realistic timeframe.\n\nThat said, i took a quick look at the rest of your change, but the diffs look very small for this to actually support worktrees.\n\nWhen there are worktrees, each worktree can have a distinct HEAD (ie. currently checked out branch), and there are a number of other per-worktree ref namespaces (see is_per_worktree_ref() in the git source code.)\n\nthe description of the change says \"git-worktree support\", but I see no changed tests. What functionality does this add?",
      "parentUuid": "5b22334a_748f587b",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 78,
        "endChar": 26
      },
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3d9ea240_da6a767a",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 18
      },
      "lineNbr": 230,
      "author": {
        "id": 51
      },
      "writtenOn": "2020-10-28T13:42:26Z",
      "side": 1,
      "message": "When exactly will this cause problems?",
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "614886a6_bf1727c3",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 18
      },
      "lineNbr": 627,
      "author": {
        "id": 51
      },
      "writtenOn": "2020-10-28T13:42:26Z",
      "side": 1,
      "message": "I think this should be switched to commonDir, too. Also, see my \"Refactor FileRepository: extract local variables\" patch. See my \"fixup!(2) Add git-worktree support for already created worktrees\" patch.",
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29c90cd3_91c7601d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/FileRepository.java",
        "patchSetId": 18
      },
      "lineNbr": 734,
      "author": {
        "id": 51
      },
      "writtenOn": "2020-10-28T13:42:26Z",
      "side": 1,
      "message": "Before this patch, it could be useful to extract getDirectory() to some local variable. See my \"Refactor FileRepository: extract local variables\" patch.",
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3176df2_d855fbd6",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/RefDirectory.java",
        "patchSetId": 18
      },
      "lineNbr": 1253,
      "author": {
        "id": 51
      },
      "writtenOn": "2020-10-28T13:42:26Z",
      "side": 1,
      "message": "gitCommitDir does not work here: for \"HEAD\" it must be gitDir (as in the previous patches). See my \"fixup!(1) Add git-worktree support for already created worktrees\" patch.",
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cab1e8ee_40ea4653",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/ReflogReaderImpl.java",
        "patchSetId": 18
      },
      "lineNbr": 40,
      "author": {
        "id": 51
      },
      "writtenOn": "2020-10-28T13:42:26Z",
      "side": 1,
      "message": "Instead of determining the correct directory here, I would pass in just the logName: FileRepository is the better place to determine the correct directory. Also, we will get rid of the dependency on Repository here. See my \"Refactor ReflogReaderImpl: replace Repository parameter by File\" patch.",
      "revId": "88653dad7a86c06e6f9c08fcb9dd750d2792339d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    }
  ]
}