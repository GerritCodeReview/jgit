{
  "comments": [
    {
      "key": {
        "uuid": "2c62a250_e08d01a0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "nit: this commit message header is a bit too wide, see\nhttps://wiki.eclipse.org/EGit/Contributor_Guide#Commit_message_guidelines",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d2f8642_41395469",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 1628
      },
      "writtenOn": "2019-12-20T01:37:13Z",
      "side": 1,
      "message": "s/.../the Code Aurora Linux kernel repo/",
      "range": {
        "startLine": 11,
        "startChar": 48,
        "endLine": 11,
        "endChar": 63
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89837cea_1d3a4354",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 11,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "can you add the git url for this example so that we can verify your patch",
      "parentUuid": "8d2f8642_41395469",
      "range": {
        "startLine": 11,
        "startChar": 48,
        "endLine": 11,
        "endChar": 63
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4264d814_578d675c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1628
      },
      "writtenOn": "2019-12-20T01:37:13Z",
      "side": 1,
      "message": "The description is focussing a bit too much on the mechanics rather than the algorithmic change. Something like this will help people understand (please update when I get details wrong):\nHistorically, bitmap index creation happened in 3 phases:\n1) Select the commits to which bitmaps should be attached\n2) Create all of the bitmaps for them, stored in undeltified (uncompressed?) format\n3) Write the bitmap index to disk\n\nI/We investigated interleaving steps 2 \u0026 3, but for phase 2 it is most efficient to create bitmaps starting with the oldest commit and moving to the newest commit, because the newer commits are able to reuse the work for the older ones. But bitmap deltification is more optimal when a newer commit\u0027s bitmap is the base, and the current disk format writes bitmaps out for the newest commits first.\n\nSo instead this change introduces a new collection to hold the deltified \u0026 compressed representations of the bitmaps, keeping a smaller subset of commits in the PackBitmapIndexBuilder to help make the revwalks more efficient.",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 71
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b76a158a_47425e17",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 18,
      "author": {
        "id": 1628
      },
      "writtenOn": "2019-12-20T01:37:13Z",
      "side": 1,
      "message": "... and only using it to optimize the revwalks.",
      "range": {
        "startLine": 18,
        "startChar": 4,
        "endLine": 18,
        "endChar": 26
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7e753258_c36aab8c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 20,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "did you mean previous ?",
      "range": {
        "startLine": 20,
        "startChar": 0,
        "endLine": 20,
        "endChar": 8
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d35c7245_267c56a0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 29,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "I think there\u0027s no need to add the author as a redundant footer in the commit message since Git is already tracking author and committer for each commit.",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19f64523_59ecc9aa",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/revwalk/AddToBitmapWithCacheFilter.java",
        "patchSetId": 4
      },
      "lineNbr": 2,
      "author": {
        "id": 1628
      },
      "writtenOn": "2019-12-20T01:37:13Z",
      "side": 1,
      "message": "There is new guidance on copyright headers: https://www.eclipse.org/projects/handbook/#ip-copyright-headers. https://git.eclipse.org/r/c/147144/10/org.eclipse.jgit.http.server/src/org/eclipse/jgit/http/server/UploadPackErrorHandler.java is a new example.\n\nPlease apply that to any new files (no need to clean up existing ones).",
      "range": {
        "startLine": 2,
        "startChar": 0,
        "endLine": 2,
        "endChar": 34
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "64994813_8111c074",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/revwalk/AddToBitmapWithCacheFilter.java",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1628
      },
      "writtenOn": "2019-12-20T01:37:13Z",
      "side": 1,
      "message": "It seems like doing this step before creating the filter would allow reusing AddToBitmapFilter. E.g., rather than:\n  BitmapCommit c \u003d prevCommit;\n  BitmapBuilder b \u003d new BitmapBuilder();\n  RevFilter f\u003d new AddToBitmapWithCacheFilter(c, b);\nreuse existing classes this way:\n  BitmapBuilder b \u003d new BitmapBuilder();\n  b.or(prevCommit.getBitmap();\n  RevFilter f\u003d new AddToBitmapFilter(b);\n\nThis would probably allow you to revert the changes in BitmapWalker too. If I\u0027m wrong about this it is because I\u0027m having trouble reviewing this large a change on my laptop screen. Splitting out any no-op refactorings first would help.",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 95,
        "endChar": 37
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9e8a7b4d_4cdd796b",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/revwalk/AddToBitmapWithCacheFilter.java",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 1628
      },
      "writtenOn": "2020-02-05T04:30:00Z",
      "side": 1,
      "message": "Ok, after talking offline I see that the walk is used to build up a bitmap of all objects reachable from a commit, and that you can only use a shortcut when you are sure the commit is an ancestor of the commit in question, which isn\u0027t necessarily true in my suggested rework. Let me think a bit more about how this can be made more clear.",
      "parentUuid": "64994813_8111c074",
      "range": {
        "startLine": 95,
        "startChar": 0,
        "endLine": 95,
        "endChar": 37
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e86d853f_897dde3d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackBitmapIndexBuilder.java",
        "patchSetId": 4
      },
      "lineNbr": 197,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "move this refactoring into a separate change",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c316a376_5f3519df",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackBitmapIndexBuilder.java",
        "patchSetId": 4
      },
      "lineNbr": 210,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "use active voice: \"Process a commit and prepare its bitmap ...\"",
      "range": {
        "startLine": 210,
        "startChar": 4,
        "endLine": 210,
        "endChar": 46
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c3751b39_5f97e2fd",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackBitmapIndexBuilder.java",
        "patchSetId": 4
      },
      "lineNbr": 213,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "I don\u0027t understand this",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7f186eed_1bd1a384",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackBitmapIndexBuilder.java",
        "patchSetId": 4
      },
      "lineNbr": 228,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "inline this ?\n\n bitmapsToWrite.add(generateStoredEntry(oldest));",
      "range": {
        "startLine": 228,
        "startChar": 15,
        "endLine": 228,
        "endChar": 25
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c602865e_f28a4816",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackBitmapIndexBuilder.java",
        "patchSetId": 4
      },
      "lineNbr": 233,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "reduce",
      "range": {
        "startLine": 233,
        "startChar": 9,
        "endLine": 233,
        "endChar": 13
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1c9659e0_a50cadb1",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackBitmapIndexBuilder.java",
        "patchSetId": 4
      },
      "lineNbr": 234,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "what are the conditions when we don\u0027t need to keep the bitmap ?",
      "range": {
        "startLine": 233,
        "startChar": 33,
        "endLine": 234,
        "endChar": 21
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ba0dba4_b6530576",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackBitmapIndexBuilder.java",
        "patchSetId": 4
      },
      "lineNbr": 382,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "inline ?",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c3a9f57_11fe1ec4",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/BitmapCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 53,
      "author": {
        "id": 1628
      },
      "writtenOn": "2019-12-20T01:37:13Z",
      "side": 1,
      "message": "If after other reworks it is still beneficial to make this a top-level class, please split it out as a separate change to make the review easier.",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 50
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b57105e8_82c33ddb",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/BitmapCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "objectId or oid if you want it short ?",
      "range": {
        "startLine": 100,
        "startChar": 11,
        "endLine": 100,
        "endChar": 16
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1fd233eb_3c228e0a",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/BitmapCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 116,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "that\u0027s a strange abbreviation, either commit or c if you like it short",
      "range": {
        "startLine": 116,
        "startChar": 45,
        "endLine": 116,
        "endChar": 49
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2dca9beb_6857ad5c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/BitmapCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "nit: remove the extra empty line",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "95e37181_4343d5fe",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/BitmapCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 146,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "comment empty block",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "52c10509_5308c0ea",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/BitmapCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 199,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "this is hard to understand, better:\n\nSet whether the bitmap of the BitmapCommit ...",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea6f388e_e39e03e0",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/pack/BitmapCommit.java",
        "patchSetId": 4
      },
      "lineNbr": 214,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "the new BitmapCommit",
      "range": {
        "startLine": 214,
        "startChar": 13,
        "endLine": 214,
        "endChar": 35
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4da6087d_ef9641a1",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/BitmapWalker.java",
        "patchSetId": 4
      },
      "lineNbr": 101,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "next release is now 5.7, rebase your change on origin/master and update to @since 5.7",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a7011a7_f5eecae8",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/BitmapWalker.java",
        "patchSetId": 4
      },
      "lineNbr": 103,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-12-26T09:33:36Z",
      "side": 1,
      "message": "leaky abstraction: public API must not expose internal classes",
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac4dce97_c83a8dd0",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/storage/pack/PackConfig.java",
        "patchSetId": 4
      },
      "lineNbr": 1149,
      "author": {
        "id": 1628
      },
      "writtenOn": "2019-12-20T01:37:13Z",
      "side": 1,
      "message": "The other configuration parameters here actually affect how the packfile and/or its bitmap indices are constructed, whereas this parameter is purely for optimization of memory usage. Through experimentation we can probably find an optimal value here and hardcode it, rather than cluttering the public API.\n\nSo please revert this and hardcode with a value that is a no op. We can use internal patches to experiment and find the optimal value.",
      "range": {
        "startLine": 1148,
        "startChar": 0,
        "endLine": 1149,
        "endChar": 0
      },
      "revId": "88c420cfa6d0f236b80979245d412356f6f16147",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    }
  ]
}