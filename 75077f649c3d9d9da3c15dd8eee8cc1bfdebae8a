{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "113fa3aa_df8cc2f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 49
      },
      "lineNbr": 0,
      "author": {
        "id": 304466
      },
      "writtenOn": "2023-01-05T12:04:22Z",
      "side": 1,
      "message": "I just pushed a version implemented by RevCommitCG, please see what needs to be improved.\n\nRegards,\nKyle",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "989cd3b7_f6158016",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevCommitCG.java",
        "patchSetId": 49
      },
      "lineNbr": 49,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-01-05T23:29:04Z",
      "side": 1,
      "message": "IIUC RevWalk reparses the headers on every #parseHeader invocation (don\u0027t know why). but that shouldn\u0027t be necessary... should this check if PARSED flag is already set and skip completely the #parseHeaders?",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecabe004_bf6d28c5",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevCommitCG.java",
        "patchSetId": 49
      },
      "lineNbr": 49,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-01-05T23:29:04Z",
      "side": 1,
      "message": "If walk.commitGraph() doesn\u0027t return null anymore, this parseInGraph just means \"graph.getCommitData() !\u003d null... maybe we can do this more clear? \n\ne.g. doing that here and then calling parseInGraph with the CommitGraph.CommitData? or even inlining parseInGraph...",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea3a68c7_9d2b132e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevCommitCG.java",
        "patchSetId": 49
      },
      "lineNbr": 49,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-01-05T23:29:04Z",
      "side": 1,
      "message": "Somewhere we need to accomodate this from RevCommit:\n```\nif (!walk.shallowCommitsInitialized) {\n    walk.initializeShallowCommits(this);\n}\n```\n\nIt sets the parents to NO_PARENTS and ignores whatever the pack (commit-graph in this case) says for shallow commits.",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94e2ebad_2140842b",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevCommitCG.java",
        "patchSetId": 49
      },
      "lineNbr": 49,
      "author": {
        "id": 304466
      },
      "writtenOn": "2023-01-06T07:52:18Z",
      "side": 1,
      "message": "\u003e IIUC RevWalk reparses the headers on every #parseHeader invocation (don\u0027t know why). but that shouldn\u0027t be necessary... should this check if PARSED flag is already set and skip completely the #parseHeaders?\n\nJGit currently checks the PARSED flag in RevWalk.\n\neg.\n```\npublic void parseHeaders(RevObject obj)\n\t\t\tthrows MissingObjectException, IOException {\n\t\tif ((obj.flags \u0026 PARSED) \u003d\u003d 0)\n\t\t\tobj.parseHeaders(this);\n\t}\n```\n\nRevWalk#PARSED is used instead of RevObject#PARSED, although their values are both 1. This does get confusing, maybe they should all use RevWalk#PARSED ?",
      "parentUuid": "989cd3b7_f6158016",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1e65b73f_2d2b1196",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevCommitCG.java",
        "patchSetId": 49
      },
      "lineNbr": 49,
      "author": {
        "id": 304466
      },
      "writtenOn": "2023-01-06T07:52:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ecabe004_bf6d28c5",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa8a66fc_83fc3160",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevCommitCG.java",
        "patchSetId": 49
      },
      "lineNbr": 49,
      "author": {
        "id": 304466
      },
      "writtenOn": "2023-01-06T07:52:18Z",
      "side": 1,
      "message": "Oops! I didn\u0027t notice this, thanksÔºÅ\n\nDone.\n\nBy the way, because of this, I found that we should not write commit-graph for shallow repo, here is the bugfix[1].\n\n[1] https://git.eclipse.org/r/c/jgit/jgit/+/199262",
      "parentUuid": "ea3a68c7_9d2b132e",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "595f091f_037fbbfd",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevCommitCG.java",
        "patchSetId": 49
      },
      "lineNbr": 49,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-01-06T22:33:55Z",
      "side": 1,
      "message": "The check I was asking for is that one in the RevWalk.\n\nThanks for bringing up that duplicated PARSED. I don\u0027t know the context of those flags, but sounds like they could be unified (?) It is orthogonal to the commit-graph though, so I resolve this comment.",
      "parentUuid": "94e2ebad_2140842b",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c789758_a99aec09",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevWalk.java",
        "patchSetId": 49
      },
      "lineNbr": 1171,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-01-05T23:29:04Z",
      "side": 1,
      "message": "It would be simpler and probably more efficient to create a \"EmptyCommitGraph\" implementation of the CommitGraph interface, create a static instance somehere (EMPTY_COMMIT_GRAPH) and here do just:\n\nif (commitGraph \u003d\u003d null) {\n  commitGraph \u003d reader.getCommitGraph().orElse(EMPTY_COMMIT_GRAPH);\n}\n\nreturn commitGraph.",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "490e2ce0_0a4dde5c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevWalk.java",
        "patchSetId": 49
      },
      "lineNbr": 1171,
      "author": {
        "id": 304466
      },
      "writtenOn": "2023-01-06T07:52:18Z",
      "side": 1,
      "message": "Agree, done.",
      "parentUuid": "0c789758_a99aec09",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e93d43a_43ba6dc0",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevWalk.java",
        "patchSetId": 49
      },
      "lineNbr": 1721,
      "author": {
        "id": 201156
      },
      "writtenOn": "2023-01-05T23:29:04Z",
      "side": 1,
      "message": "This is more symmetrical and clear if we just have a new method:\nRevCommit createCommit(AnyObjectId id, int pos) {\n  // if pos \u003e\u003d 0 return RevCommitGC otherwise RevCommit\n} \n\nAnd call it from #createCommit(AnyObjectId) with createCommit(id, graph.findGraphPosition(id))",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cee5ca6c_ad18410e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/revwalk/RevWalk.java",
        "patchSetId": 49
      },
      "lineNbr": 1721,
      "author": {
        "id": 304466
      },
      "writtenOn": "2023-01-06T07:52:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1e93d43a_43ba6dc0",
      "revId": "75077f649c3d9d9da3c15dd8eee8cc1bfdebae8a",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31"
    }
  ]
}