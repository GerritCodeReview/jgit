{
  "comments": [
    {
      "key": {
        "uuid": "AABOIn///tA\u003d",
        "filename": "org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/SubscribeDaemon.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "I think you want to use FileSnapshot for this.",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///oM\u003d",
        "filename": "org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/SubscribeDaemon.java",
        "patchSetId": 1
      },
      "lineNbr": 96,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "AABOIn///tA\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///s8\u003d",
        "filename": "org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/SubscribeDaemon.java",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "I wonder if this should be configurable?",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///oI\u003d",
        "filename": "org.eclipse.jgit.pgm/src/org/eclipse/jgit/pgm/SubscribeDaemon.java",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "I\u0027ll make it a flag on this command.",
      "parentUuid": "AABOIn///s8\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///s0\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 102,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "Don\u0027t use System.currentTimeMillis() to measure elapsed time; it changes when the system clock changes. Use System.nanoTime().",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///oE\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 102,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "AABOIn///s0\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///sw\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 140,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "What does \"have their state reset\" mean?",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///n8\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 140,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "Updated the javadoc. It means that the server didn\u0027t recognize the fast-restart token so the subscription needs to be started fresh again.",
      "parentUuid": "AABOIn///sw\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///sk\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 146,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "This method is getting a bit long. Maybe make the anonymous Thread class a nested class or something?",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///n4\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 146,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "Done, created a new SubscribeProcess class.",
      "parentUuid": "AABOIn///sk\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///ss\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "Lots of unnecessary finals here. (Not all unnecessary due to the Thread, but still some.)",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///oA\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "All of those finals are needed: p, key, subscriber, initCmds are all used in the thread.",
      "parentUuid": "AABOIn///ss\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///sg\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 162,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "Did you mean this to be inside the if, before the continue? Doesn\u0027t seem like you should be closing the instance right before using it on l. 177 below.",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///nk\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 162,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "No that\u0027s right: it checks to see if there are any new commands to send, then kills the connection+thread and restarts inside a new thread. If there aren\u0027t any new commands, it doesn\u0027t touch the existing connection and continues to the next publisher.",
      "parentUuid": "AABOIn///sg\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///sc\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 165,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "Hoist this outside the try block so you can call instance.close() in the two continue cases?",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///ng\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 165,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "I removed one of the continue cases and added a process.close().",
      "parentUuid": "AABOIn///sc\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///sU\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 184,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "How is this time compared to the maximum validity time of a fast-restart token? Is it worth it to detect when we think our fast-restart token is no longer going to be valid, and then not send it? Or do we just assume it\u0027s good enough that the server will reject it and we\u0027ll have to connect one more time?",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///nw\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 184,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "I\u0027m expecting the client to disconnect when the server doesn\u0027t recognize it and reconnect again. The data size for fast-restart is small, especially when no new specs are being added. Individual servers may adjust their restart times as well, so no use invalidating ourselves early.",
      "parentUuid": "AABOIn///sU\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///sY\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 193,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "Optional nit: \"socket\" seems too specific, perhaps \"connection\"",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///n0\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 193,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "AABOIn///sY\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///sA\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 206,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "Would this make more sense as a method on subscriber, so you could just call subscriber.reset() or something?",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///ns\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 206,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "I made it a method in SubscribeProcess.",
      "parentUuid": "AABOIn///sA\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///r4\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 216,
      "author": {
        "id": 383
      },
      "writtenOn": "2012-07-10T18:46:01Z",
      "side": 1,
      "message": "Seems like the right thing to do here would be to let the thread die, i.e. return.\n\nAlso, since you\u0027re doing a lot of work here, and there is only one obvious point that I see that can throw an InterruptedException, you may want to check Thread.interrupted() at the end of the loop as well.",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOIn///no\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/SubscriptionManager.java",
        "patchSetId": 1
      },
      "lineNbr": 216,
      "author": {
        "id": 694
      },
      "writtenOn": "2012-07-11T01:46:46Z",
      "side": 1,
      "message": "This is outside of the while loop so doing nothing is the same as returning. Added the interrupted check to the beginning of the loop because the continue will cut off the bottom of the loop.",
      "parentUuid": "AABOIn///r4\u003d",
      "revId": "ff8d8c497d09dfa2a65ba094625f8cc3f452ba34",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}