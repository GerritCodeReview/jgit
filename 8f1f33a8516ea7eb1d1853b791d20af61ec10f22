{
  "comments": [
    {
      "key": {
        "uuid": "56a15202_b0f70647",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 925
      },
      "writtenOn": "2019-11-07T04:01:35Z",
      "side": 1,
      "message": "nit: missing space",
      "range": {
        "startLine": 15,
        "startChar": 26,
        "endLine": 15,
        "endChar": 28
      },
      "revId": "8f1f33a8516ea7eb1d1853b791d20af61ec10f22",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bde1f9f6_df3f73db",
        "filename": "org.eclipse.jgit.junit/src/org/eclipse/jgit/junit/MockSystemReader.java",
        "patchSetId": 2
      },
      "lineNbr": 356,
      "author": {
        "id": 925
      },
      "writtenOn": "2019-11-07T04:01:35Z",
      "side": 1,
      "message": "Remove this?",
      "range": {
        "startLine": 356,
        "startChar": 2,
        "endLine": 356,
        "endChar": 36
      },
      "revId": "8f1f33a8516ea7eb1d1853b791d20af61ec10f22",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "493291af_92bdb9fe",
        "filename": "org.eclipse.jgit.junit/src/org/eclipse/jgit/junit/MockSystemReader.java",
        "patchSetId": 2
      },
      "lineNbr": 357,
      "author": {
        "id": 925
      },
      "writtenOn": "2019-11-07T04:01:35Z",
      "side": 1,
      "message": "Is this intentionally returning null?",
      "range": {
        "startLine": 357,
        "startChar": 2,
        "endLine": 357,
        "endChar": 14
      },
      "revId": "8f1f33a8516ea7eb1d1853b791d20af61ec10f22",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f28efc25_8bd9d5d2",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/util/SystemReader.java",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 44628
      },
      "writtenOn": "2019-11-06T22:43:22Z",
      "side": 1,
      "message": "According to [1] the XDG_CONFIG_HOME already _is_ the .config subdirectory.\n\n[1] https://wiki.archlinux.org/index.php/XDG_Base_Directory\n\nAnd I think this needs to be done much more carefully. First, Windows doesn\u0027t have XDG, so the environment variable is probably unset. We could use System.getenv(\"PROGRAMDATA\") on Windows. And if set (even on Linux) the environment variable might contain garbage.\n\nI\u0027d do something like this\n\n  private Path getXDGConfigHome(FS fs) {\n    String configHomePath;\n    if (isWindows()) {\n      // XDG spec doesn\u0027t apply.\n      configHomePath \u003d System.getenv(\"PROGRAMDATA\");\n    } else {\n      configHomePath \u003d System.getenv(Constants.XDG_CONFIG_HOME);\n      if (StringUtils.isEmptyOrNull(configHomePath)) {\n        configHomePath \u003d new File(fs.userHome(), \".config\").getAbsolutePath();\n      }\n    }\n    if (!StringUtils.isEmptyOrNull(configHomePath)) {\n      try {\n        Path xdgHomePath \u003d Paths.get(configHomePath);\n        Files.createDirectories(xdgHomePath);\n        return xdgHomePath;\n      } catch (IOException | InvalidPathException e) {\n        // TODO: log; return null below\n      }\n    }\n    return null;\n  }\n\n  public FileBasedConfig openJGitConfig(Config parent, FS fs) {\n    Path xdgPath \u003d getXDGConfigHome(fs);\n    if (xdgPath !\u003d null) {\n      try {\n        Path configPath \u003d xdgPath.resolve(\"jgit\");\n        Files.createDirectories(configPath);\n        configPath \u003d configPath.resolve(Constants.CONFIG);\n        return new FileBasedConfig(parent, configPath.toFile(), fs);\n      } catch (IOException e) {\n        // TODO: log; return ~/.jgitconfig below\n      }\n    }\n    return new FileBasedConfig(parent, new File(fs.userHome(), \".jgitconfig\"), fs);\n  }",
      "revId": "8f1f33a8516ea7eb1d1853b791d20af61ec10f22",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af3c38c9_fed74c16",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/util/SystemReader.java",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 44628
      },
      "writtenOn": "2019-11-07T06:43:28Z",
      "side": 1,
      "message": "And probably could use SystemReader\u0027s getenv() instead of System.gentenv().",
      "parentUuid": "f28efc25_8bd9d5d2",
      "revId": "8f1f33a8516ea7eb1d1853b791d20af61ec10f22",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "74a76784_c95c4703",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/util/SystemReader.java",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 44628
      },
      "writtenOn": "2019-11-07T07:15:26Z",
      "side": 1,
      "message": "One difference with using PROGRAMDATA on Windows, though: that is host-specific (it\u0027s normally C:\\ProgramData). Not sure all users can write there. At least one would need to set access permissions when creating the jgit sub-directory such that any user can write there, but I\u0027m not sure if the java.nio.file.Files FileAttributes can do this on Windows. (One would assume so, but I just don\u0027t know. Probably via AclFileAttributeView.) Perhaps it\u0027s simpler *not* to use PROGRAMDATA and just use ~/.jgitconfig unconditionally on Windows.\n\nAnd I hope using ~/.jgitconfig doesn\u0027t cause massive slow-downs if the user home is on a network drive. getFileStoreAttributes(Path) will try to read it (via user config) possibly once per FileStore.",
      "parentUuid": "af3c38c9_fed74c16",
      "revId": "8f1f33a8516ea7eb1d1853b791d20af61ec10f22",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}