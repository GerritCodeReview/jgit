{
  "comments": [
    {
      "key": {
        "uuid": "ee7c288d_7418abe6",
        "filename": "org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/diffmergetool/ExternalToolTest.java",
        "patchSetId": 41
      },
      "lineNbr": 25,
      "author": {
        "id": 44628
      },
      "writtenOn": "2021-11-19T07:52:24Z",
      "side": 1,
      "message": "Should this be abstract?",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7be7ddcc_6266898a",
        "filename": "org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/diffmergetool/ExternalToolTest.java",
        "patchSetId": 41
      },
      "lineNbr": 25,
      "author": {
        "id": 119988
      },
      "writtenOn": "2021-11-19T08:54:34Z",
      "side": 1,
      "message": "I\u0027ll adjust it with the next patch set.",
      "parentUuid": "ee7c288d_7418abe6",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56faefaf_55ff2678",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/diffmergetool/DiffTools.java",
        "patchSetId": 41
      },
      "lineNbr": 64,
      "author": {
        "id": 44628
      },
      "writtenOn": "2021-11-19T07:52:24Z",
      "side": 1,
      "message": "Why are all these boolean parameters Optionals? That looks super fishy.[1]\n\n[1] https://blog.indrek.io/articles/misusing-java-optional/#3-using-optional-as-a-method-parameter",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cac03d5e_1ab68df4",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/diffmergetool/DiffTools.java",
        "patchSetId": 41
      },
      "lineNbr": 64,
      "author": {
        "id": 119988
      },
      "writtenOn": "2021-11-19T08:54:34Z",
      "side": 1,
      "message": "The optionals are needed to differentiate between 3 values, set to true, set to false and unset. Previously Andre defined a separate class for this, the class was replaced by optionals due to review feedback.\n\nThis is not an attempt to simulate optional parameters. Or do you have other concerns (\"fishy\"\" can mean any number of things and I only briefly looked at the linked blog post)?",
      "parentUuid": "56faefaf_55ff2678",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9df3352_f6e26d14",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/diffmergetool/DiffTools.java",
        "patchSetId": 41
      },
      "lineNbr": 64,
      "author": {
        "id": 1179
      },
      "writtenOn": "2021-11-19T09:17:16Z",
      "side": 1,
      "message": "The linked blog just says \"Optional is bad bad bad, use it only for return\".\n\nEarlier in this patch we had a dedicated tri-state BooleanOption and it was requested to replace it:\n\n\"For the current use of this BooleanOption thing I think indeed simply using a Boolean and treating null as \"unset\" would be good enough\"\n\nHowever, passing \"null\" for a Boolean argument is another anti-pattern, because all the typical uses of a Boolean do NOT mean it  is a tri-state value, so dereferencing this argument can happen very easy.\n\nhttps://softwareengineering.stackexchange.com/questions/12777/are-null-references-really-a-bad-thing\n\nOptional\u003cBoolean\u003e states exactly what it means - we might have a value, but be aware it could be not set.\n\nAsking google, it links to few stack overflows where Optional\u003cBoolean\u003e is often proposed as tri-state boolean values (after a dedicated tri-state class):\n\nhttps://stackoverflow.com/questions/314800/best-way-to-define-true-false-unset-state\nhttps://softwareengineering.stackexchange.com/questions/275370/should-a-java-boolean-be-used-for-ternary-3-state-logic\n\nSo I think that the use of Optional\u003cBoolean\u003e is OK here.",
      "parentUuid": "cac03d5e_1ab68df4",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dc9667bb_fa86513b",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/diffmergetool/DiffTools.java",
        "patchSetId": 41
      },
      "lineNbr": 64,
      "author": {
        "id": 44628
      },
      "writtenOn": "2021-11-19T09:28:10Z",
      "side": 1,
      "message": "\u003e The linked blog just says \"Optional is bad bad bad, use it only for return\".\n\nIt argues the case, and even points to a statement from Brian Goetz to the same effect. Just because it\u0027s a blog post is not a reason to dismiss it lightly.\n\nWhatever. IMO this tri-state Boolean thing shows that something isn\u0027t quite right yet with the interface here, but as it\u0027s an internal class we can refactor into something better (if we find something better) later.",
      "parentUuid": "b9df3352_f6e26d14",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a850f6c1_56c72655",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/diffmergetool/DiffTools.java",
        "patchSetId": 41
      },
      "lineNbr": 64,
      "author": {
        "id": 4
      },
      "writtenOn": "2021-11-19T09:48:53Z",
      "side": 1,
      "message": "I agree that Boolean + null for tristate boolean is ugly, we have many other places where we use an enum for multi-state options which is clean and nice to read.\n\nI think the BooleanOption proposed in \nhttps://git.eclipse.org/r/c/jgit/jgit/+/137468/8/org.eclipse.jgit/src/org/eclipse/jgit/diffmergetool/BooleanOption.java#51\nis unnecessarily complex. \n\nHow about a simple enum :\n\n public enum BooleanTriState {\n     TRUE,\n     FALSE,\n     UNSET\n }\n\nI think there is no need for methods like isUndefined() instead do\n\n if (option \u003d\u003d BooleanTriState.UNSET)\n\nenum also allows to use switch if all three states are needed\n\n switch (option) {\n case TRUE:\n     break;\n case FALSE:\n     break;\n case UNSET:\n     break;\n }\n\nThe Config#getBoolean methods all have a defaultValue parameter so they should be implementable on top of such a tri-state boolean enum. There is Config#unset to go back from TRUE or FALSE to UNSET.\n\nIf we can agree on this we should fix all tri-state boolean options currently using nullable Boolean to use this new enum (in separate changes).",
      "parentUuid": "dc9667bb_fa86513b",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5f0087e_17314b2a",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/diffmergetool/DiffTools.java",
        "patchSetId": 41
      },
      "lineNbr": 64,
      "author": {
        "id": 119988
      },
      "writtenOn": "2021-11-19T10:20:58Z",
      "side": 1,
      "message": "Same to me. It would complicate adjusting the rest of the changes, but not by much. Andrey?\n\nWhich package would the BooleanTriState be in, if we were adding it?\n\nI don\u0027t know what Andre thinks about this, but considering the original BooleanOption was changed to Optional\u003cBoolean\u003e, likely Andre wouldn\u0027t mind the newly proposed change either.",
      "parentUuid": "a850f6c1_56c72655",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "81983fb4_768db978",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/diffmergetool/DiffTools.java",
        "patchSetId": 41
      },
      "lineNbr": 64,
      "author": {
        "id": 159690
      },
      "writtenOn": "2021-11-19T10:31:31Z",
      "side": 1,
      "message": "I accept all changes that are proposed to make this understandable (readable) for all reviewers to push this change and continue with later commits :)",
      "parentUuid": "d5f0087e_17314b2a",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2a3f84c_7b9444bb",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/diffmergetool/DiffTools.java",
        "patchSetId": 41
      },
      "lineNbr": 64,
      "author": {
        "id": 4
      },
      "writtenOn": "2021-11-19T10:49:41Z",
      "side": 1,
      "message": "I think BooleanTriState should be close to Config which is in the package org.eclipse.jgit.lib",
      "parentUuid": "81983fb4_768db978",
      "revId": "e0606900108f13e045994d75e3005108b305e75e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    }
  ]
}