{
  "comments": [
    {
      "key": {
        "uuid": "436ae1f2_ab82cd37",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 44628
      },
      "writtenOn": "2019-09-02T11:59:00Z",
      "side": 1,
      "message": "That\u0027s exactly what I was observing in bug 548716.",
      "range": {
        "startLine": 10,
        "startChar": 12,
        "endLine": 10,
        "endChar": 20
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c81485aa_a0b3c330",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T12:43:06Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "436ae1f2_ab82cd37",
      "range": {
        "startLine": 10,
        "startChar": 12,
        "endLine": 10,
        "endChar": 20
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "93b5b68d_58e79355",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 23,
      "author": {
        "id": 44628
      },
      "writtenOn": "2019-09-02T11:59:00Z",
      "side": 1,
      "message": "Which explains why the next fetch would re-want them, and then fail in its BatchRefUpdate and raise this misleading \"lock failed\" exception.",
      "range": {
        "startLine": 22,
        "startChar": 20,
        "endLine": 23,
        "endChar": 38
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2120e009_df9121c5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 23,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T12:43:06Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "93b5b68d_58e79355",
      "range": {
        "startLine": 22,
        "startChar": 20,
        "endLine": 23,
        "endChar": 38
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "52c9723e_18200b0c",
        "filename": "org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/storage/file/BatchRefUpdateTest.java",
        "patchSetId": 3
      },
      "lineNbr": 190,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-09-02T15:10:29Z",
      "side": 1,
      "message": "I can\u0027t make this test fail when reverting PackedBatchRefUpdate to the previous version (effectively eliminating the fix in PackedBatchRefUpdate) neither on linux (SLES 15, 176 cores, ext4) nor on Mac",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a210cd5c_d657778b",
        "filename": "org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/storage/file/BatchRefUpdateTest.java",
        "patchSetId": 3
      },
      "lineNbr": 190,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T15:19:44Z",
      "side": 1,
      "message": "176 cores sounds like really upscale machine, and the faster your machine, the less likely this is to hit. I was using this test on a 2012 lenovo T420.\n\nWe could do a test that does a single iteration, and then read back the data to check that it was sorted.",
      "parentUuid": "52c9723e_18200b0c",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "515189cb_de9d32b1",
        "filename": "org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/storage/file/BatchRefUpdateTest.java",
        "patchSetId": 3
      },
      "lineNbr": 190,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T16:32:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a210cd5c_d657778b",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee2314d3_cf6c9130",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-09-02T13:55:19Z",
      "side": 1,
      "message": "this import is now unused, hence remove it",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 27
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1517f45_a391125e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T16:32:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ee2314d3_cf6c9130",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 27
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7a53401_6c5e847f",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-09-02T13:55:19Z",
      "side": 1,
      "message": "also remove this import when removing unused method byName()",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3569c504_5d63c1f9",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 58,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T16:32:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b7a53401_6c5e847f",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a5c82c25_898ae7ef",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 395,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-09-02T13:55:19Z",
      "side": 1,
      "message": "eclipse compiler raises error: potential NPE on cmd\n\nseems the compiler isn\u0027t smart enough to understand that cmp is set to -1 if cmd \u003d\u003d null, silence the error by asserting cmd is not null before this line:\n\n assert cmd !\u003d null;",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8b2732a6_b1a3a243",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 395,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T16:32:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a5c82c25_898ae7ef",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "105327f4_eec90dba",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 396,
      "author": {
        "id": 44628
      },
      "writtenOn": "2019-09-02T11:51:07Z",
      "side": 1,
      "message": "Which lock failed? Perhaps a different exception would be better.",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "19caa00a_7dbf10a0",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 396,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T12:18:06Z",
      "side": 1,
      "message": "see below.",
      "parentUuid": "105327f4_eec90dba",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d32f34ca_063ccfa6",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 396,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T16:32:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "19caa00a_7dbf10a0",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a45b0f7f_35c2166c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 403,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-09-02T13:55:19Z",
      "side": 1,
      "message": "eclipse compiler raises errors: potential NPE on cmd and on ref\n\nsame problem as above, silence bogus errors using assertions\n\n assert cmd !\u003d null;\n assert ref !\u003d null;",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7928d9d5_c729e07a",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 403,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T16:32:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a45b0f7f_35c2166c",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3073f608_6c115692",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 404,
      "author": {
        "id": 44628
      },
      "writtenOn": "2019-09-02T11:51:07Z",
      "side": 1,
      "message": "Please don\u0027t report a lock failure here. That\u0027s what happens in bug 548716, but it\u0027s not correct. Rather the fetch requests a ref it already had.",
      "range": {
        "startLine": 404,
        "startChar": 5,
        "endLine": 404,
        "endChar": 32
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d409c38c_2067358c",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 404,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T12:18:06Z",
      "side": 1,
      "message": "I think this is a lock failure from the perspective of a BatchRefUpdate: the update tries to apply an update that corresponds to an older state.",
      "parentUuid": "3073f608_6c115692",
      "range": {
        "startLine": 404,
        "startChar": 5,
        "endLine": 404,
        "endChar": 32
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da599ab9_4d25cb4e",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 404,
      "author": {
        "id": 44628
      },
      "writtenOn": "2019-09-02T15:57:42Z",
      "side": 1,
      "message": "I don\u0027t quite agree. In bug 548716 this tried to apply an update that corresponded to older state because an earlier update had corrupted the database. Reporting \"lock failed\" is highly misleading here. Just look at the initial reaction of the (not inexperienced) developers in bug 548716, myself included: we all started by hunting for stale lock files. (And of course we didn\u0027t find any.)",
      "parentUuid": "d409c38c_2067358c",
      "range": {
        "startLine": 404,
        "startChar": 5,
        "endLine": 404,
        "endChar": 32
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "88fcedbc_2644ed68",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 404,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T16:32:09Z",
      "side": 1,
      "message": "The semantics of LOCK_FAILURE are set by the tests, see eg.\n\nhttps://eclipse.googlesource.com/jgit/jgit/+/2f751c34e132cf86d51271255f92cdbc105c18d2/org.eclipse.jgit.test/tst/org/eclipse/jgit/internal/storage/file/BatchRefUpdateTest.java#242\n\nchanging what we return here would be a change in behavior, which the JGit project is very hesitant about. In any event, changing the behavior should be pursued in a different change.",
      "parentUuid": "da599ab9_4d25cb4e",
      "range": {
        "startLine": 404,
        "startChar": 5,
        "endLine": 404,
        "endChar": 32
      },
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f0743cc_1dc4f505",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 493,
      "author": {
        "id": 4
      },
      "writtenOn": "2019-09-02T13:55:19Z",
      "side": 1,
      "message": "remove this no longer used private method",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a4f818b_343fba94",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/internal/storage/file/PackedBatchRefUpdate.java",
        "patchSetId": 3
      },
      "lineNbr": 493,
      "author": {
        "id": 98905
      },
      "writtenOn": "2019-09-02T16:32:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2f0743cc_1dc4f505",
      "revId": "c79aed0f5115d9b78fe380e6ab456f173e45b588",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}