{
  "comments": [
    {
      "key": {
        "uuid": "AABOL3///vM\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 1
      },
      "writtenOn": "2013-01-11T02:46:13Z",
      "side": 1,
      "message": "This change breaks behavior. For example using lastest master from JGit against latest master from Gerrit... fails. JGit\u0027s setEnum() writes a different string to the configuration file than Gerrit expects to read back.",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOMH////I\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 118
      },
      "writtenOn": "2013-01-11T11:06:24Z",
      "side": 1,
      "message": "Any chance for fixing this in Gerrit?",
      "parentUuid": "AABOL3///vM\u003d",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOMH///zY\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 1
      },
      "writtenOn": "2013-01-11T18:52:23Z",
      "side": 1,
      "message": "Already fixed in Gerrit. But I want to be clear this did change behavior, so other applications may also report problems if they pick up this version of JGit and use enums. :-)",
      "parentUuid": "AABOMH////I\u003d",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOMH///s8\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 1
      },
      "writtenOn": "2013-01-11T22:00:50Z",
      "side": 1,
      "message": "I think we have even more breakages upstream in Gerrit than I expected. This particular change has caused Gerrit to misunderstand every project.config.\n\nAt least this is only a behavior change that has real-world impact. We don\u0027t have to bump to JGit 3.0 since the API remained consistent.",
      "parentUuid": "AABOMH///zY\u003d",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOMH///sk\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 1
      },
      "writtenOn": "2013-01-11T22:09:50Z",
      "side": 1,
      "message": "I am trying to fix this in https://git.eclipse.org/r/9632",
      "parentUuid": "AABOMH///s8\u003d",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOMH///pM\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 1
      },
      "writtenOn": "2013-01-12T02:44:56Z",
      "side": 1,
      "message": "There are a couple of ways to retry this change.\n\n1)  Define a new interface that enums will extend like:\n\n  interface ConfigEnum {\n    String toConfigValue();\n    boolean matchConfigValue(String in);\n  }\n\nIn setEnum() if the passed in T implements ConfigEnum, downcast and call toConfigValue() instead of using the existing logic. In getEnum() if the passed in enum type implements ConfigEnum, call matchConfigValue on each member of the enum in ordinal order and select the one that returned true.\n\n2)  Overload getEnum/setEnum with another version that takes a Map\u003cEnum, String\u003e. The caller sets up this map to define the translation of enum value to config file string. In setEnum its a trivial lookup of the enum in the map and store the string. In getEnum you reverse the map and lookup by String.\n\n3)  Define a new algorithm interface like:\n\n  interface ConfigEnumFormatter\u003cT\u003e {\n    String toConfig(T enumValue);\n    T fromConfig(String e, T[] values);\n  }\n\nOverload getEnum and setEnum to accept this ConfigEnumFormatter. The existing implementations can call the new forms passing in a DEFAULT version that does the current logic. You can then write a new one called OPTION or something that prefixes values with \"--\" and does the _-\u003e- translation that you want.\n\nI am open to a change that provides option 1 or 3 before trying to redo this change. I think 2 isn\u0027t a good choice, but is at least worth mentioning.",
      "parentUuid": "AABOMH///sk\u003d",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABOM3///6k\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 118
      },
      "writtenOn": "2013-01-14T16:07:51Z",
      "side": 1,
      "message": "Shawn, I\u0027m sorry to hear the change caused trouble. I\u0027m going to look at it later this week. Thanks for the tips!",
      "parentUuid": "AABOMH///pM\u003d",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABONn///+E\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 118
      },
      "writtenOn": "2013-01-17T11:35:40Z",
      "side": 1,
      "message": "Should I push a new patch set here or create a new change for it?",
      "parentUuid": "AABOM3///6k\u003d",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AABONn///28\u003d",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/lib/Config.java",
        "patchSetId": 5
      },
      "lineNbr": 723,
      "author": {
        "id": 1
      },
      "writtenOn": "2013-01-17T17:50:08Z",
      "side": 1,
      "message": "This change is closed and won\u0027t accept a new patch set. So you need to make a new change, witha  new Change-Id. Please add me to the change as a reviewer.",
      "parentUuid": "AABONn///+E\u003d",
      "revId": "c98abc9c0586c73ef7df4172644b7dd21c979e9d",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": false
    }
  ]
}