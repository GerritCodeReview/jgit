{
  "comments": [
    {
      "key": {
        "uuid": "b17ef767_1417beff",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/BasePackConnection.java",
        "patchSetId": 4
      },
      "lineNbr": 256,
      "author": {
        "id": 44628
      },
      "writtenOn": "2020-11-21T09:48:39Z",
      "side": 1,
      "message": "Is this package-visible for testing? Some tests for this would be good.",
      "revId": "9d83248c6a0eca521413e5d65ab1a36eb593444e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5351756c_f55a791b",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/BasePackConnection.java",
        "patchSetId": 4
      },
      "lineNbr": 256,
      "author": {
        "id": 301457
      },
      "writtenOn": "2020-11-21T12:55:19Z",
      "side": 1,
      "message": "It is, I\u0027ll write them once we agree what it should do ðŸ˜Š",
      "parentUuid": "b17ef767_1417beff",
      "revId": "9d83248c6a0eca521413e5d65ab1a36eb593444e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2393cf32_07ea93b0",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/BasePackConnection.java",
        "patchSetId": 4
      },
      "lineNbr": 274,
      "author": {
        "id": 44628
      },
      "writtenOn": "2020-11-21T09:48:39Z",
      "side": 1,
      "message": "I don\u0027t think symrefs pointing to other symrefs exist? What case is this for?",
      "revId": "9d83248c6a0eca521413e5d65ab1a36eb593444e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cfcb4b9c_c316a2af",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/BasePackConnection.java",
        "patchSetId": 4
      },
      "lineNbr": 274,
      "author": {
        "id": 301457
      },
      "writtenOn": "2020-11-21T12:55:19Z",
      "side": 1,
      "message": "For symrefs in capabilities, no case exists for anything other than HEAD, because nothing else is sent.\n\nFor symbolic-refs themselves, c git certainly allows them to refer to other symbolic-refs\n$ git symbolic-ref a refs/heads/main\n$ git symbolic-ref b a\n$ git symbolic-ref b\nrefs/heads/main\n$ cat .git/b\nref: a\n\nso if you want this cater for some future change where upload-pack might include all symbolic-refs as symrefs then this is for completeness.",
      "parentUuid": "2393cf32_07ea93b0",
      "revId": "9d83248c6a0eca521413e5d65ab1a36eb593444e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb08325d_6ddc74d9",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/BasePackConnection.java",
        "patchSetId": 4
      },
      "lineNbr": 274,
      "author": {
        "id": 44628
      },
      "writtenOn": "2020-11-21T14:43:50Z",
      "side": 1,
      "message": "Wow. I wasn\u0027t aware of that; never seen nor had any use for this. Thanks for pointing it out.\n\nSo this basic mechanism looks good. But for protocol V2, an interface with a Map\u003cString, String\u003e instead of Collection\u003cString\u003e would be better; then the code could be re-used as-is.\n\nSo basically\n\n  Map\u003cString, String\u003e symrefs \u003d extractSymRefsFromCapabilities(remoteCapabilities);\n  updateWithSymRefs(refMap, symRefs);\n\nThen the protocol V2 implementation could re-use updateWithSymRefs. (Symref info is transported differently in protocol V2 (as are capabilities).)",
      "parentUuid": "cfcb4b9c_c316a2af",
      "revId": "9d83248c6a0eca521413e5d65ab1a36eb593444e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9eeee8d_9c73bba8",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/BasePackConnection.java",
        "patchSetId": 4
      },
      "lineNbr": 274,
      "author": {
        "id": 301457
      },
      "writtenOn": "2020-11-22T07:39:23Z",
      "side": 1,
      "message": "Sounds good, I\u0027ll do that and add some tests.\n\nSince this updates the passed refMap, rather than returning a new one, I\u0027m of a mind to also require symRefs to be modifiable and remove entries as they are resolved - it would make for, I think, a nicer impl and also gives a way to check for unresolvable symrefs.\nAny opinion on that?",
      "parentUuid": "cb08325d_6ddc74d9",
      "revId": "9d83248c6a0eca521413e5d65ab1a36eb593444e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d6f59603_dde03511",
        "filename": "org.eclipse.jgit/src/org/eclipse/jgit/transport/BasePackConnection.java",
        "patchSetId": 4
      },
      "lineNbr": 274,
      "author": {
        "id": 44628
      },
      "writtenOn": "2020-11-22T11:05:05Z",
      "side": 1,
      "message": "Yes, I agree. Though I don\u0027t know what to do if there ever is an unresolved symref.",
      "parentUuid": "c9eeee8d_9c73bba8",
      "revId": "9d83248c6a0eca521413e5d65ab1a36eb593444e",
      "serverId": "97ee7c02-f12f-4043-b43e-dea463d88b31",
      "unresolved": true
    }
  ]
}